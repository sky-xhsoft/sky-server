# Sky-Server 系统架构设计文档

## 1. 项目概述

### 1.1 项目背景

Sky-Server 是一个基于元数据驱动的企业级应用框架，旨在通过元数据配置快速构建企业管理系统，减少重复的CRUD代码开发工作。系统核心思想是将业务逻辑、数据结构、UI配置等通过元数据存储在数据库中，运行时动态读取并执行。

### 1.2 核心特性

- **元数据驱动**: 表结构、字段、UI、权限等均通过元数据定义
- **动态表单生成**: 基于元数据自动生成数据录入表单和列表视图
- **灵活的权限控制**: 支持多租户、角色组、字段级权限控制
- **可扩展的动作系统**: 支持URL、存储过程、JavaScript、Go方法、Bash等多种动作类型
- **单据编号管理**: 内置单据编号生成器，支持多种循环规则
- **数据字典**: 统一管理下拉选项等枚举数据
- **审核流程**: 支持单据提交、审核、作废等完整生命周期管理
- **审计日志**: 记录所有关键操作，支持数据追溯
- **单点登录**: 支持多客户端（Web、移动端、桌面端）统一认证

### 1.3 技术选型

| 组件 | 技术 | 说明 |
|------|------|------|
| 开发语言 | Go 1.21+ | 高性能、并发友好 |
| Web框架 | Gin | 轻量级、高性能的HTTP框架 |
| ORM | GORM | 功能完善的Go ORM库 |
| 数据库 | MySQL 8.0+ | 关系型数据库 |
| 缓存 | Redis | 元数据缓存、会话管理 |
| 配置管理 | Viper | 多格式配置文件支持 |
| 日志 | Zap | 高性能结构化日志 |
| API文档 | Swagger | 自动生成API文档 |

## 2. 系统架构

### 2.1 整体架构

```
┌─────────────────────────────────────────────────────────┐
│                     客户端层                              │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐              │
│  │ Web前端  │  │ 移动端   │  │ 第三方   │              │
│  └──────────┘  └──────────┘  └──────────┘              │
└─────────────────────────────────────────────────────────┘
                        │
                        ▼
┌─────────────────────────────────────────────────────────┐
│                     API网关层                             │
│  ┌──────────────────────────────────────────────┐       │
│  │  认证鉴权  │  限流  │  日志  │  路由         │       │
│  └──────────────────────────────────────────────┘       │
└─────────────────────────────────────────────────────────┘
                        │
                        ▼
┌─────────────────────────────────────────────────────────┐
│                    业务服务层                             │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐              │
│  │元数据服务  │  │通用CRUD  │  │权限服务  │              │
│  ├──────────┤  ├──────────┤  ├──────────┤              │
│  │动作执行    │  │单据编号  │  │字典服务  │              │
│  ├──────────┤  ├──────────┤  ├──────────┤              │
│  │审核流程    │  │审计日志  │  │单点登录  │              │
│  └──────────┘  └──────────┘  └──────────┘              │
└─────────────────────────────────────────────────────────┘
                        │
                        ▼
┌─────────────────────────────────────────────────────────┐
│                    数据访问层                             │
│  ┌──────────┐  ┌──────────┐                             │
│  │ GORM ORM │  │ Redis    │                             │
│  └──────────┘  └──────────┘                             │
└─────────────────────────────────────────────────────────┘
                        │
                        ▼
┌─────────────────────────────────────────────────────────┐
│                    数据存储层                             │
│  ┌──────────┐  ┌──────────┐                             │
│  │  MySQL   │  │  Redis   │                             │
│  └──────────┘  └──────────┘                             │
└─────────────────────────────────────────────────────────┘
```

### 2.2 项目目录结构

```
sky-server/
├── cmd/
│   └── server/              # 主程序入口
│       └── main.go
├── internal/                # 内部包，不对外暴露
│   ├── api/                 # API层
│   │   ├── handler/         # HTTP处理器
│   │   ├── middleware/      # 中间件
│   │   └── router/          # 路由配置
│   ├── service/             # 业务逻辑层
│   │   ├── metadata/        # 元数据服务
│   │   ├── crud/            # 通用CRUD服务
│   │   ├── auth/            # 认证授权服务
│   │   ├── sso/             # 单点登录服务
│   │   ├── action/          # 动作执行服务
│   │   ├── workflow/        # 审核流程服务
│   │   ├── audit/           # 审计日志服务
│   │   ├── sequence/        # 单据编号服务
│   │   └── dict/            # 数据字典服务
│   ├── model/               # 数据模型
│   │   ├── entity/          # 数据库实体
│   │   ├── dto/             # 数据传输对象
│   │   └── vo/              # 视图对象
│   ├── repository/          # 数据访问层
│   │   ├── mysql/           # MySQL仓储
│   │   └── redis/           # Redis仓储
│   ├── pkg/                 # 内部工具包
│   │   ├── cache/           # 缓存工具
│   │   ├── logger/          # 日志工具
│   │   ├── validator/       # 验证工具
│   │   ├── mask/            # MASK字段工具
│   │   ├── permission/      # 权限位运算工具
│   │   └── utils/           # 通用工具
│   ├── plugin/              # 插件系统
│   │   ├── action/          # 动作插件
│   │   └── validator/       # 验证器插件
│   └── config/              # 配置相关
│       └── config.go
├── pkg/                     # 可对外暴露的包
│   └── errors/              # 错误定义
├── api/                     # API定义
│   └── swagger/             # Swagger文档
├── configs/                 # 配置文件
│   ├── config.yaml          # 主配置
│   └── config.example.yaml  # 配置示例
├── scripts/                 # 脚本
│   ├── build.sh             # 编译脚本
│   └── deploy.sh            # 部署脚本
├── sqls/                    # SQL文件
│   ├── create_skyserver.sql        # 数据库初始化脚本
│   └── migrations/          # 数据库迁移文件
├── docs/                    # 文档
├── test/                    # 测试
│   ├── integration/         # 集成测试
│   └── e2e/                 # 端到端测试
├── go.mod
├── go.sum
├── Makefile
├── .gitignore
├── README.md
└── CLAUDE.md
```

## 3. 核心模块设计

### 3.1 元数据服务 (Metadata Service)

**职责**：
- 加载和缓存元数据（表、字段、关系等）
- 提供元数据查询接口
- 元数据变更时刷新缓存（手动触发）

**核心接口**：
```go
type MetadataService interface {
    // 获取表元数据
    GetTable(tableName string) (*TableMetadata, error)

    // 获取表的所有字段
    GetColumns(tableID int) ([]*ColumnMetadata, error)

    // 获取表的关联关系
    GetTableRefs(tableID int) ([]*TableRefMetadata, error)

    // 刷新缓存
    RefreshCache() error

    // 获取元数据版本号
    GetMetadataVersion() (string, error)
}
```

### 3.2 通用CRUD服务 (Generic CRUD Service)

**职责**：
- 基于元数据动态执行增删改查操作
- 处理字段赋值策略（pk、docno、createBy等）
- 执行数据验证
- 应用数据过滤
- 管理单据生命周期（提交、审核、作废等）

**核心接口**：
```go
type CRUDService interface {
    // ========== 基础CRUD操作 ==========
    // 创建记录
    Create(tableName string, data map[string]interface{}) (int, error)

    // 更新记录
    Update(tableName string, id int, data map[string]interface{}) error

    // 删除记录（软删除）
    Delete(tableName string, id int) error

    // 查询单条记录
    GetByID(tableName string, id int) (map[string]interface{}, error)

    // 查询列表
    Query(tableName string, params *QueryParams) (*PageResult, error)

    // ========== 单据生命周期管理 ==========
    // 提交记录
    Submit(tableName string, id int) error

    // 反提交
    Unsubmit(tableName string, id int) error

    // 作废
    Void(tableName string, id int) error

    // 审核
    Approve(tableName string, id int, comment string) error

    // 反审核
    Unapprove(tableName string, id int) error

    // ========== 批量操作 ==========
    // 批量导入
    Import(tableName string, data []map[string]interface{}) (*ImportResult, error)

    // 导出
    Export(tableName string, params *QueryParams) ([]byte, error)
}
```

**单据状态定义**：
```go
const (
    DocStatusDraft     = "DRAFT"     // 草稿
    DocStatusSubmitted = "SUBMITTED" // 已提交
    DocStatusApproved  = "APPROVED"  // 已审核
    DocStatusVoided    = "VOIDED"    // 已作废
)
```

### 3.3 权限服务 (Permission Service)

**职责**：
- 验证用户对表/目录的访问权限
- 应用数据过滤（基于权限的SQL过滤）
- 字段级权限控制（SGRADE）

**核心接口**：
```go
type PermissionService interface {
    // 检查用户对表的操作权限
    CheckPermission(userID int, tableID int, action string) (bool, error)

    // 获取用户的数据过滤条件
    GetDataFilter(userID int, tableID int) (string, error)

    // 检查字段访问权限
    CheckFieldPermission(userID int, columnID int) (bool, error)

    // 获取用户的完整权限信息
    GetUserPermissions(userID int) (*UserPermissions, error)
}
```

**权限常量定义**：
```go
const (
    PermRead   = 1 << 0  // 1  - 读权限
    PermWrite  = 1 << 1  // 2  - 写权限
    PermSubmit = 1 << 2  // 4  - 提交权限
    PermAudit  = 1 << 3  // 8  - 审核权限
    PermExport = 1 << 4  // 16 - 导出权限
)

// 权限组合
const (
    PermReadWrite       = PermRead | PermWrite                    // 3
    PermReadSubmit      = PermRead | PermSubmit                   // 5
    PermReadAudit       = PermRead | PermAudit                    // 9
    PermReadWriteSubmit = PermRead | PermWrite | PermSubmit       // 7
    PermReadWriteAudit  = PermRead | PermWrite | PermAudit        // 11
    PermAllNoExport     = PermRead | PermWrite | PermSubmit | PermAudit  // 15
    PermAll             = PermAllNoExport | PermExport            // 31
)
```

### 3.4 单点登录服务 (SSO Service)

**职责**：
- 支持多客户端（Web、移动端、桌面端）统一认证
- 管理用户会话（支持多设备同时登录）
- Token生成和验证
- 设备管理

**核心接口**：
```go
type SSOService interface {
    // 登录
    Login(req *LoginRequest) (*LoginResponse, error)

    // 刷新Token
    RefreshToken(refreshToken string) (*TokenResponse, error)

    // 登出（单个设备）
    Logout(userID int, deviceID string) error

    // 登出所有设备
    LogoutAll(userID int) error

    // 获取用户所有活跃会话
    GetActiveSessions(userID int) ([]*Session, error)

    // 踢出指定设备
    KickDevice(userID int, deviceID string) error
}
```

**登录请求结构**：
```go
type LoginRequest struct {
    Username   string `json:"username" binding:"required"`
    Password   string `json:"password" binding:"required"`
    CompanyID  int    `json:"companyId" binding:"required"`
    ClientType string `json:"clientType" binding:"required"` // web, mobile, desktop
    DeviceID   string `json:"deviceId"`   // 设备唯一标识
    DeviceName string `json:"deviceName"` // 设备名称
}

type LoginResponse struct {
    Token        string `json:"token"`
    RefreshToken string `json:"refreshToken"`
    ExpiresIn    int    `json:"expiresIn"`
    User         *User  `json:"user"`
}

type TokenClaims struct {
    UserID     int    `json:"userId"`
    CompanyID  int    `json:"companyId"`
    Username   string `json:"username"`
    ClientType string `json:"clientType"`
    DeviceID   string `json:"deviceId"`
    jwt.StandardClaims
}
```

### 3.5 动作执行服务 (Action Service)

**职责**：
- 执行自定义动作（URL、存储过程、JavaScript、Go方法、Bash等）
- 执行表命令钩子（before/after事件）
- 动作插件管理

**核心接口**：
```go
type ActionService interface {
    // 执行动作
    ExecuteAction(actionID int, context map[string]interface{}) (interface{}, error)

    // 执行表命令钩子
    ExecuteTableCmd(tableID int, action string, event string, data map[string]interface{}) error

    // 注册Go方法动作
    RegisterGoAction(name string, handler ActionHandler) error

    // 获取可用的Go方法列表
    GetAvailableGoActions() []string
}

// 动作处理器接口
type ActionHandler func(context map[string]interface{}) (interface{}, error)
```

**动作类型**：
```go
type ActionType string

const (
    ActionTypeURL    ActionType = "url"    // URL跳转
    ActionTypeSP     ActionType = "sp"     // 存储过程
    ActionTypeJS     ActionType = "js"     // JavaScript（前端执行）
    ActionTypeGo     ActionType = "go"     // Go方法调用
    ActionTypeBash   ActionType = "bsh"    // Bash脚本
    ActionTypePython ActionType = "py"     // Python脚本
    ActionTypeJob    ActionType = "job"    // 后台任务
)
```

### 3.6 审核流程服务 (Workflow Service)

**职责**：
- 管理审核流程定义
- 执行审核流程
- 支持多级审核
- 审核历史记录

**核心接口**：
```go
type WorkflowService interface {
    // 提交审核
    SubmitForApproval(tableName string, recordID int) error

    // 审核通过
    Approve(tableName string, recordID int, approverID int, comment string) error

    // 审核拒绝
    Reject(tableName string, recordID int, approverID int, comment string) error

    // 获取审核历史
    GetApprovalHistory(tableName string, recordID int) ([]*ApprovalRecord, error)

    // 获取待审核列表
    GetPendingApprovals(userID int) ([]*PendingApproval, error)
}

type ApprovalRecord struct {
    ID          int       `json:"id"`
    Step        int       `json:"step"`        // 审核步骤
    ApproverID  int       `json:"approverId"`
    ApproverName string   `json:"approverName"`
    Action      string    `json:"action"`      // approve/reject
    Comment     string    `json:"comment"`
    CreateTime  time.Time `json:"createTime"`
}
```

### 3.7 审计日志服务 (Audit Service)

**职责**：
- 记录所有关键操作
- 支持数据变更追溯
- 提供审计日志查询

**核心接口**：
```go
type AuditService interface {
    // 记录操作日志
    LogOperation(log *AuditLog) error

    // 查询审计日志
    QueryLogs(params *AuditQueryParams) ([]*AuditLog, error)

    // 获取记录的变更历史
    GetRecordHistory(tableName string, recordID int) ([]*AuditLog, error)
}

type AuditLog struct {
    ID         int64                  `json:"id"`
    TableName  string                 `json:"tableName"`
    RecordID   int                    `json:"recordId"`
    Action     string                 `json:"action"` // CREATE/UPDATE/DELETE/SUBMIT/APPROVE/VOID
    UserID     int                    `json:"userId"`
    Username   string                 `json:"username"`
    CompanyID  int                    `json:"companyId"`
    OldValue   map[string]interface{} `json:"oldValue,omitempty"`
    NewValue   map[string]interface{} `json:"newValue,omitempty"`
    Changes    map[string]*FieldChange `json:"changes,omitempty"`
    IPAddress  string                 `json:"ipAddress"`
    UserAgent  string                 `json:"userAgent"`
    CreateTime time.Time              `json:"createTime"`
}

type FieldChange struct {
    OldValue interface{} `json:"oldValue"`
    NewValue interface{} `json:"newValue"`
}
```

### 3.8 单据编号服务 (Sequence Service)

**职责**：
- 生成单据编号
- 管理编号序列
- 支持多种循环类型（日、月、年等）
- 并发安全（使用分布式锁）

**核心接口**：
```go
type SequenceService interface {
    // 生成下一个编号
    NextValue(seqName string) (string, error)

    // 重置序列
    ResetSequence(seqName string) error

    // 预览下一个编号（不实际生成）
    PreviewNext(seqName string) (string, error)
}
```

### 3.9 数据字典服务 (Dictionary Service)

**职责**：
- 管理数据字典和字典项
- 提供字典数据查询
- 字典缓存管理

**核心接口**：
```go
type DictService interface {
    // 获取字典项列表
    GetDictItems(dictID int) ([]*DictItem, error)

    // 根据字典名称获取项
    GetDictItemsByName(dictName string) ([]*DictItem, error)

    // 获取默认值
    GetDefaultValue(dictName string) (string, error)

    // 刷新字典缓存
    RefreshDictCache() error
}
```

## 4. 工具类设计

### 4.1 MASK字段工具 (Mask Utility)

**职责**：解析和操作10位MASK字符串

**核心功能**：
```go
package mask

type FieldMask struct {
    AddVisible    bool // 位1: 新增可见
    AddEditable   bool // 位2: 新增可修改
    EditVisible   bool // 位3: 修改可见
    EditEditable  bool // 位4: 修改可修改
    ListVisible   bool // 位5: 列表可见
    ListEditable  bool // 位6: 列表可修改
    ImportVisible bool // 位7: 导入可见
    ExportVisible bool // 位8: 导出可见
    PrintVisible  bool // 位9: 打印可见
    Reserved      bool // 位10: 扩展预留
}

// 从字符串解析MASK
func ParseMask(maskStr string) *FieldMask

// 生成MASK字符串
func (m *FieldMask) ToString() string

// 检查指定操作是否可见
func (m *FieldMask) IsVisible(operation string) bool

// 检查指定操作是否可编辑
func (m *FieldMask) IsEditable(operation string) bool

// 示例：
// maskStr := "1111111111"
// mask := ParseMask(maskStr)
// if mask.IsVisible("add") && mask.IsEditable("add") {
//     // 新增界面可见且可修改
// }
```

### 4.2 权限位运算工具 (Permission Utility)

**职责**：权限值的位运算操作

**核心功能**：
```go
package permission

// 检查是否拥有指定权限
func HasPermission(userPerm, requirePerm int) bool {
    return (userPerm & requirePerm) == requirePerm
}

// 添加权限
func AddPermission(userPerm, addPerm int) int {
    return userPerm | addPerm
}

// 移除权限
func RemovePermission(userPerm, removePerm int) int {
    return userPerm &^ removePerm
}

// 解析权限值为字符串数组
func ParsePermission(perm int) []string {
    var perms []string
    if perm & PermRead != 0 {
        perms = append(perms, "read")
    }
    if perm & PermWrite != 0 {
        perms = append(perms, "write")
    }
    // ...
    return perms
}

// 从字符串数组生成权限值
func BuildPermission(perms []string) int

// 示例：
// userPerm := 7  // 读+写+提交
// if HasPermission(userPerm, PermRead|PermWrite) {
//     // 有读写权限
// }
```

## 5. 数据流设计

### 5.1 查询流程

```
客户端请求 → API Handler → SSO验证 → 权限验证 → 获取表元数据
→ 构建查询SQL → 应用数据过滤 → 执行查询 → 字段权限过滤(MASK)
→ 返回结果
```

### 5.2 创建流程

```
客户端请求 → API Handler → SSO验证 → 权限验证 → 获取表元数据
→ 执行before钩子 → 字段赋值处理 → 数据验证
→ 插入数据 → 记录审计日志 → 执行after钩子 → 返回结果
```

### 5.3 提交审核流程

```
客户端请求 → API Handler → SSO验证 → 权限验证
→ 检查单据状态 → 执行before钩子 → 更新状态为SUBMITTED
→ 触发审核流程 → 记录审计日志 → 执行after钩子
→ 发送审核通知 → 返回结果
```

### 5.4 动作执行流程

```
客户端请求 → API Handler → SSO验证 → 权限验证 → 获取动作定义
→ 准备执行上下文 → 根据类型执行动作
  ├→ URL: 返回URL给前端跳转
  ├→ SP: 调用存储过程
  ├→ JS: 返回JS代码给前端执行
  ├→ Go: 调用注册的Go方法
  ├→ Bash: 执行Shell脚本（沙箱）
  └→ Python: 执行Python脚本
→ 记录审计日志 → 返回结果
```

## 6. 安全设计

### 6.1 认证机制

**单点登录设计**：
- 采用JWT令牌认证
- Token包含用户ID、公司ID、客户端类型、设备ID等信息
- AccessToken过期时间：2小时
- RefreshToken过期时间：7天
- Redis存储用户会话映射：`session:user:{userID}:device:{deviceID}` → session信息
- 支持强制下线（踢出设备）

**多设备管理**：
```
用户可以同时在多个设备登录：
- Web浏览器
- iOS移动端
- Android移动端
- 桌面客户端

每个设备一个独立的session，可以单独踢出。
```

### 6.2 授权机制

- 基于目录和权限组的访问控制
- 支持读、写、提交、审核、导出等多级权限（位运算）
- 字段级权限控制（SGRADE + MASK）
- 数据级过滤（FILTER_OBJ）

### 6.3 数据隔离

- 多租户通过SYS_COMPANY_ID隔离
- 所有查询自动添加公司ID过滤
- 用户只能访问所属公司的数据
- 跨公司访问需要特殊权限

### 6.4 SQL注入防护

- 使用ORM参数化查询
- 对用户输入进行严格验证
- 元数据中的SQL片段需要白名单验证
- 过滤危险SQL关键字（DROP、TRUNCATE等）

### 6.5 动作执行安全

**Bash脚本安全**：
- 使用沙箱环境执行
- 限制可执行的命令白名单
- 限制文件访问路径
- 超时控制（最长30秒）

**Go方法调用安全**：
- 只允许调用预先注册的方法
- 方法必须实现ActionHandler接口
- 参数验证和类型检查

## 7. 性能优化

### 7.1 元数据缓存

- 元数据加载后缓存到Redis
- 缓存Key：`metadata:table:{tableName}`、`metadata:column:{tableID}`
- 缓存过期时间：24小时
- 元数据变更时手动调用刷新接口
- 版本号机制：前端可检测元数据版本变化

### 7.2 数据库优化

- 为常用查询字段建立索引
- 使用连接池管理数据库连接（最大100个连接）
- 大数据量表使用分页查询（默认每页20条）
- 慢查询日志记录（>500ms）

### 7.3 并发控制

- 使用Go的goroutine处理并发请求
- 数据库连接池限制并发数
- 单据编号生成使用Redis分布式锁
- 审核操作使用乐观锁（版本号）

### 7.4 缓存策略

- 字典数据缓存（1小时）
- 用户权限缓存（30分钟）
- 会话信息缓存（Token有效期）
- 使用缓存穿透保护（空值缓存）

## 8. 监控和日志

### 8.1 日志设计

**日志级别**：
- DEBUG: 调试信息
- INFO: 一般信息（API请求、响应）
- WARN: 警告信息（慢查询、缓存未命中）
- ERROR: 错误信息（异常、失败操作）

**关键操作日志**：
- 用户登录/登出
- 数据创建/修改/删除
- 单据提交/审核/作废
- 动作执行
- 权限检查失败
- 异常和错误

### 8.2 监控指标

- API响应时间（P50、P95、P99）
- 数据库查询性能
- 缓存命中率
- 系统资源使用（CPU、内存、磁盘）
- 并发用户数
- 错误率

### 8.3 审计追溯

- 所有数据变更记录到sys_audit_log表
- 保存变更前后的值
- 记录操作人、时间、IP、设备等信息
- 支持按表、记录、用户、时间等维度查询

## 9. 扩展性设计

### 9.1 水平扩展

- 无状态设计，支持多实例部署
- 使用Redis共享会话和缓存
- 负载均衡分发请求（Nginx/HAProxy）
- 数据库读写分离

### 9.2 插件机制

**Go方法动作插件**：
```go
// 1. 定义插件接口
type ActionPlugin interface {
    Name() string
    Execute(context map[string]interface{}) (interface{}, error)
}

// 2. 实现插件
type SendEmailPlugin struct{}

func (p *SendEmailPlugin) Name() string {
    return "sendEmail"
}

func (p *SendEmailPlugin) Execute(ctx map[string]interface{}) (interface{}, error) {
    // 发送邮件逻辑
    return "Email sent", nil
}

// 3. 注册插件
func init() {
    action.RegisterPlugin(&SendEmailPlugin{})
}
```

**自定义验证器**：
```go
type ValidatorPlugin interface {
    Name() string
    Validate(value interface{}, rule string) error
}
```

## 10. 部署架构

### 10.1 开发环境

```
Developer Machine
├── MySQL (本地)
├── Redis (本地)
└── Sky-Server (go run)
```

### 10.2 生产环境

```
┌─────────────┐
│  Load       │
│  Balancer   │
└──────┬──────┘
       │
   ┌───┴────┬────────┐
   ▼        ▼        ▼
┌─────┐  ┌─────┐  ┌─────┐
│App-1│  │App-2│  │App-N│
└──┬──┘  └──┬──┘  └──┬──┘
   │        │        │
   └────────┼────────┘
            │
     ┌──────┴──────┐
     ▼             ▼
┌─────────┐  ┌─────────┐
│ MySQL   │  │  Redis  │
│(Master/ │  │(Cluster)│
│ Slave)  │  │         │
└─────────┘  └─────────┘
```

## 11. 下一步计划

1. 完善数据库设计文档（添加审计表、审核流程表）
2. 完善API接口设计文档（添加审核、审计等接口）
3. 制定详细的开发计划
4. 搭建项目基础框架
5. 实现核心模块
6. 编写单元测试和集成测试
7. 性能测试和优化
